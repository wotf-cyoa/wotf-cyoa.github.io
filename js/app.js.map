{"version":3,"sources":["app/app.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/FA;AAAA","file":"public/js/app.js","sourcesContent":["var editor = ace.edit('game-rb-editor');\neditor.setTheme('ace/theme/monokai');\neditor.getSession().setFoldStyle('manual');\neditor.getSession().setMode(\"ace/mode/ruby\");\neditor.getSession().setTabSize(2);\neditor.getSession().setUseSoftTabs(true);\neditor.getSession().setUseWrapMode(true);\neditor.setDisplayIndentGuides(false);\neditor.setHighlightActiveLine(true);\neditor.setShowPrintMargin(false);\neditor.setShowInvisibles(true);\n\nvar addToTerminal = function(value, type) {\n    if (type === 'output' && value.indexOf('()') > -1) return;\n    var classes = 'outputs outputs-' + type;\n    value = value.replace(/&/g, '&amp;')\n                 .replace(/>/g, '&gt;')\n                 .replace(/</g, '&lt;')\n                 .replace(/\"/g, '&quot;')\n                 .replace(/'/g, '&apos;')\n                 .replace(/\\n/g, '<br>');\n    terminalOutputs.innerHTML += '<p class=\"' + classes + '\">' + value + '</p>';\n    terminalInput.scrollIntoView();\n};\n\nvar handleterminalInput = function(event) {\n    var key = event.which || event.keyCode;\n    if (key == 13) {\n        event.preventDefault();\n        socket.emit('terminalInput', { input: terminalInput.value });\n        addToTerminal(terminalInput.value, 'input');\n        terminalInput.value = '';\n    }\n};\n\nvar handleFileLoad = function() {\n    var currentFileContent = editor.getValue();\n    socket.emit('fileLoad', { input: currentFileContent });\n    addToTerminal('Loading game...', 'status');\n};\n\nvar handleFileSave = function() {\n    var currentFileContent = editor.getValue();\n    socket.emit('fileSave', { fileContent: currentFileContent });\n    addToTerminal('Saving game code...', 'status');\n};\n\n//var socket = io('http://localhost:8888/ruby'),\nvar socket = io.connect('http://wotf-cyoa.herokuapp.com:80/ruby'),\n    terminal = document.getElementById('terminal'),\n    terminalOutputs = document.getElementById('terminal-outputs'),\n    terminalInput = document.getElementById('terminal-input'),\n    sourceActionSave = document.getElementById('source-action-save'),\n    sourceActionLoad = document.getElementById('source-action-load');\n\nterminal.addEventListener('click', function(e) { terminalInput.focus() }, false);\n\nsocket.on('connect', function() {\n    addToTerminal('Server connected', 'status');\n    terminalInput.addEventListener('keypress', handleterminalInput, false);\n    sourceActionSave.addEventListener('click', handleFileSave, false );\n    sourceActionLoad.addEventListener('click', handleFileLoad, false);\n});\n\nsocket.on('disconnect', function() {\n    addToTerminal('Server disconnected', 'error');\n    terminalInput.removeEventListener('keypress', handleterminalInput, false);\n    sourceActionSave.removeEventListener('click', handleFileSave, false );\n    sourceActionLoad.removeEventListener('click', handleFileLoad, false);\n});\n\nsocket.on('ready', function(data) {\n    addToTerminal(data.output, 'status');\n    editor.setValue(data.fileContent);\n    editor.gotoLine(0);\n});\n\nsocket.on('terminalOutput', function(data) {\n    //if (data.output.indexOf('Error') > -1 || data.output.indexOf('undefined') > -1)\n    //    addToTerminal(data.output, 'error');\n    //else addToTerminal(data.output, 'output');\n    addToTerminal(data.output, 'output');\n});\n\nsocket.on('terminalError', function(data) {\n    addToTerminal(data.output, 'error');\n});\n\nsocket.on('fileSaved', function(data) {\n    addToTerminal(data.output, 'status');\n});\n\nsocket.on('fileLoaded', function(data) {\n    addToTerminal(data.output, 'status');\n});\n"]}